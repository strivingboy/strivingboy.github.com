
<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8">
	<meta name="baidu-site-verification" content="xMu1n6Qhoi" />
	<meta name="google-site-verification" content="sQM_5H8xp83FnR7Rxee_d5ockt0dT7vE5mtPr3r3eXE" />
	<title>iOS9  Universal Links （通用链接） - 小孩的技术博客</title>
	<meta name="author" content="strivingboy">

	
	<meta name="description" content="iOS9 Universal Links （通用链接">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="小孩的技术博客" type="application/atom+xml">
	
	<link rel="canonical" href="http://strivingboy.github.io/blog/2015/09/27/ios9/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<link href='http://fonts.googleapis.com/css?family=Nunito:400,300,700' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
  

</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">
	
	<script src="/javascripts/md5.js"></script>
	<script type="text/javascript">
		$(function(){
			$('.profilepic').append("<img alt='Profile Picture' src='/images/avatar.png' style='width:160px;'/>");
		});	
	</script>
	
</div>
<h1><a href="/">奋斗的小孩</a></h1>
<p>keep it simple and stupid!<br>donot repeat yourself!</p>
<nav id="main-nav"><ul class="main">
    <li><a href="/">首页</a></li>
    <li><a href="/blog/archives">所有文章</a></li>
    <li><a href="/about.html">关于我</a></li>
</ul>
</nav>
<nav id="sub-nav">
	<div class="social">
		
			<a class="email" href="mailto:striving_boy@163.com" title="Email">Email</a>
		
		
		
		
		
			<a class="github" href="https://github.com/strivingboy" title="GitHub">GitHub</a>
		
		
		
		
		
		
		
		
		
		
    	
    	
			<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name">iOS9 Universal Links （通用链接）</h1>
	<div class="entry-content" itemprop="articleBody"><p><strong>&ldquo;What is Universal Links?&rdquo;</strong></p>

<p>Apple 推出通用链接：一种能够方便的通过传统 HTTP 链接来启动 APP, 使用相同的网址打开网站和 APP。</p>

<p>通过唯一的网址, 不需要特别的schema就可以链接一个特定的视图到APP 里面  。比如：在微信中使用了通用链接, 那么用户在Safari、UIWebView或者 WKWebView点击一个链接, iOS设备上的微信app怎会在微信里面自动打开这个页面, 如果没有安装则在Safrai中打开响应链接。</p>

<blockquote><p>NOTE:
Universal links let iOS 9 users open your app when they tap links to your website within WKWebView and UIWebView views and Safari pages, in addition to links that result in a call to openURL:, such as those that occur in Mail, Messages, and other apps.</p></blockquote>

<p>For users who are running versions of iOS earlier than 9.0, tapping a universal link to your website opens the link in Safari.</p>

<!--more-->


<p><strong>&ldquo;How to support Universal Links?&rdquo;</strong></p>

<ul>
<li><p>Step1:创建一个json 格式的apple-app-site-associatio 文件如下：</p>

<pre><code class="`` ">  {
      "applinks": {
          "apps": [],
          "details": [
              {
                  "appID": "9JA89QQLNQ.com.apple.wwdc",
                  "paths": [ "/wwdc/news/", "/videos/wwdc/2015/*" ]
              },
              {
                  "appID": "TeamID.BundleID2",
                  "paths": [ "*" ]
              }
          ]
      }
  }
</code></pre>

<p>  根据 paths 键设定允许的路径列表, 或只是一个星号如果你想打开 APP 而不管路径是 什么</p>

<p>  注意：paths 路径是大小写敏感的</p>

<blockquote><p>NOTE:The website paths you specify in the paths array are case sensitive.”</p></blockquote>

<p>  &ldquo;appID&#8221;组成部分：TeamID + BundleId TeamID可以从苹果开发账号页面也“Your   Account”下查看，BundleId就直接在工程里看了</p></li>
<li><p>Step2:上传 apple-app-site-association 文件</p>

<p>  注意：</p>

<p>  1、上传到web server根目录下</p>

<p>  2、web server 需要支持https,客户端需要通告https访问，并且不支持任何重定向</p>

<blockquote><p>upload it to the root of your HTTPS web server. The file needs to be accessible via HTTPS—without any redirects—at <a href="https://">https://</a><domain>/apple-app-site-association. Next, you need to handle universal links in your app.</p></blockquote></li>
<li><p>Step3:在 APP 里处理通用链接</p>

<ul>
<li><p>1、添加域名到 Capabilities</p>

<p>  在 Xcode 的 capabilities 里 添加你的 APP 域名, 必须用 applinks: 前置它   <img src="/images/domain.png" alt="" />
  这将使APP从上门的域名请求Step2中创建的JSON 文件 apple-app-site-association。当你第一次启动 APP，它会从 <a href="https://domain.com/apple-app-site-association">https://domain.com/apple-app-site-association</a> 下载这个文件。</p></li>
<li><p>2、在 AppDelegate 里支持通用链接</p></li>
</ul>


<p>  实现：
   <code>- (BOOL)application:(UIApplication *)application
   continueUserActivity:(NSUserActivity *)userActivity
     restorationHandler:(void (^)(NSArray *restorableObjects))restorationHandler</code>方法，如下：</p>

<p>  <img src="/images/delegate.png" alt="" /></p>

<p>  当 userActivity 是 NSUserActivityTypeBrowsingWeb 类型, 则意味着它已经由通用链接 API 代理。这样的话, 它保证用户打开的 URL 将有一个非空的 webpageURL 属性</p></li>
</ul>


<p><strong> apple 官网地址 </strong></p>

<p><a href="https://developer.apple.com/library/prerelease/ios/documentation/General/Conceptual/AppSearch/UniversalLinks.html#//apple_ref/doc/uid/TP40016308-CH12-SW2">通用链接 Universal Links</a></p>
</div>

</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	
	
	  
		<h2>分享</h2>  
	  	<!-- JiaThis Button BEGIN -->
<div class="jiathis_style_24x24">
	<a class="jiathis_button_qzone"></a>
	<a class="jiathis_button_tsina"></a>
	<a class="jiathis_button_tqq"></a>
	<a class="jiathis_button_weixin"></a>
	<a class="jiathis_button_renren"></a>
	<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	<a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1394259472270132" charset="utf-8"></script>
<!-- JiaThis Button END -->  
	  
	<div class="addthis_toolbox addthis_default_style ">
	<!-- <a class="addthis_counter addthis_pill_style"></a> &#8211;>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>



  
  <section>  
    <h1>Comments</h1>  
    <div id="comments" aria-live="polite"><!-- 多说评论框 start -->
	<div class="ds-thread"</div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"strivingboy"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->
</div>  
  </section>  
 </div>
			</div>
			<footer id="footer" class="inner"><p>Copyright &copy; 2015

    strivingboy


<span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>
Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a>
</footer>
		</div>
	</div>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script>window.jQuery || document.write('<script src="/javascripts/libs/jquery-1.7.2.min.js" type="text/javascript"><\/script>')</script>
<script src="/javascripts/libs/bootstrap.min.js" type="text/javascript"></script>
<script src="/javascripts/jquery.tweet.js" type="text/javascript"></script>
<script src="/javascripts/jquery.instagram.js" type="text/javascript"></script>
<script src="/javascripts/libs/jquery.masonry.min.js" type="text/javascript"></script>
<script src="/javascripts/custom.js" type="text/javascript"></script>


</body>
</html>
